<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Environment</title>
    <link rel="stylesheet" href="../styles/index.css">
</head>
<body class="bod">
    <header class="header">
        <div class="back_1">
            <img src="../assets/images/background_1.png" alt="background" class="background-image">
          <nav class="navigation">
            <div class="logo">
                <img src="../assets/images/logo.png" alt="Логотип"> <!-- Замените logo.png на путь к вашему логотипу -->
            </div>
            <img alt="burger-menu" class="navigation_list__menu" src="../assets/images/server-img/menu.svg">
            <ul class="navigation_list">
                <li class="navigation_item"><button class="navigation_button "onclick='window.location.href="../index.html"'>Главная</button></li>
                <li class="navigation_item">
                    <button class="navigation_button" onclick='window.location.href="card.html"'>Объекты</button>
                </li>
                <li class="navigation_item">
                    <button class="navigation_button" onclick='window.location.href="us.html"'>О компании</button>
                </li>
                <li class="navigation_item">
                    <button class="navigation_button  navigation_button_active" onclick='window.location.href="Services.html"'>Услуги</button>
                </li>
                <li class="navigation_item">
                    <button class="navigation_button" onclick='window.location.href="Contacts.html"'>Контакты</button>
                </li>
            </ul>
        </nav>
          <div class="center-content">
            <div class="overlay">
                Найдите Ваш <span class="spec_yel">Дом Мечты</span> с нами
            </div>
          </div>
          <div class="shadow"></div>
        </div>
      </header>
    <main>
        <section class="map-section">
            <h2>Наше расположение</h2>
            <div class="map-container">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1823.62376606437!2d30.382386317115614!3d52.36545503057772!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x46d430139b1a000b%3A0x7b88520d53f4d128!2z0YPQuy4g0KHRi9C00YzQutC-LCDQoNC10YfQuNGG0LAsINCT0L7QvNC10LvRjNGB0LrQsNGPINC-0LHQu9Cw0YHRgtGM!5e0!3m2!1sru!2sby!4v1741798001459!5m2!1sru!2sby" 
                    width="600" 
                    height="450" 
                    style="border:0;" 
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
        </section>
        <section class="payment-section">
            <h2>Оплатить</h2>
            <div class="payment-container">
                <form id="payment-form">
                    <div class="form-group">
                        <label for="amount">Сумма (BYN):</label>
                        <input type="number" id="amount" name="amount" min="1" value="50" required>
                    </div>
                    <div id="card-element">
                        <!-- Stripe Card Element will be inserted here -->
                    </div>
                    <div id="card-errors" role="alert"></div>
                    <button id="submit-payment" class="payment-button">Оплатить</button>
                </form>
            </div>
        </section>
    </main>
    <footer>
        <div>
            <div class="top_footer">
                <div class="logo_text">
                    <div class="logo_bot">
                        <img src="../assets/images/logo.png" alt="Логотип">
                    </div>
                    <div class="footer-text">
                        Total Environment реализовала проекты общей площадью более 4,5 миллиона квадратных футов для более чем 1 200 клиентов в различных регионах Беларуси, включая Минск, Гродно и Брест.
                    </div>
                </div>
                <div class="contacts">
                    <div class="tx">Свяжитесь с нами</div>
                    <hr class="custom-hr">
                    <div class="adress">
                        <h3>Total Environment</h3>
                        <p>Республика Беларусь <br>Речица, <br>ул. Сыдько, д.121</p>
                    </div>
                    <div class="numbers">
                        <h3>Продажи:</h3>
                        <p>Телефон: +375 29 555 55 55</p>
                        <p>Электронная почта: discover@total-environment.com</p>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">© 2022 TotalEnvironment | All Rights Reserved</div>
        </div>
    </footer> 

    <script>
        // Инициализация Stripe
        const stripe = Stripe('pk_test_51Qwh0KAOyWetaPXV7BMZImAuGnHTvCVeRd3DFx1Uc1uSlcFdwmqQsFZ3rdwAqh2y3NCmI8VHAb464hiBasvtakYn00JpsejMaT'); // Замените на ваш публичный ключ Stripe

        const elements = stripe.elements();
        const cardElement = elements.create('card');

        cardElement.mount('#card-element');

        const form = document.getElementById('payment-form');
        const cardErrors = document.getElementById('card-errors');

        form.addEventListener('submit', async (event) => {
            event.preventDefault();

            const { paymentMethod, error } = await stripe.createPaymentMethod({
                type: 'card',
                card: cardElement,
            });

            if (error) {
                cardErrors.textContent = error.message;
            } else {
                // Отправка paymentMethod.id на ваш сервер для завершения платежа
                fetch('/create-payment-intent', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        paymentMethodId: paymentMethod.id,
                        amount: document.getElementById('amount').value * 100, // Сумма в центах
                    }),
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('Payment successful!');
                    } else {
                        alert('Payment failed. Please try again.');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }
        });
    </script>
     <script src="../scripts/script.js"></script>
</body>